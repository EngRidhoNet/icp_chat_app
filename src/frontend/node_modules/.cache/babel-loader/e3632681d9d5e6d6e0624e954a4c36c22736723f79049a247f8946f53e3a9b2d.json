{"ast":null,"code":"import React,{useState,useRef}from'react';import{debounce}from'../../utils/helpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessageInput=_ref=>{let{onSendMessage,disabled}=_ref;const[message,setMessage]=useState('');const[messageType,setMessageType]=useState('text');const[isTyping,setIsTyping]=useState(false);const fileInputRef=useRef(null);const textareaRef=useRef(null);const handleSubmit=async e=>{e.preventDefault();if(!message.trim()||disabled)return;const messageToSend=message.trim();const typeToSend={[messageType]:null};setMessage('');setIsTyping(false);// Reset textarea height\nif(textareaRef.current){textareaRef.current.style.height='auto';}await onSendMessage(messageToSend,typeToSend);};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};const handleInputChange=e=>{setMessage(e.target.value);// Auto-resize textarea\nconst textarea=e.target;textarea.style.height='auto';textarea.style.height=Math.min(textarea.scrollHeight,120)+'px';// Typing indicator (debounced)\nif(!isTyping){setIsTyping(true);}debouncedStopTyping();};const debouncedStopTyping=debounce(()=>{setIsTyping(false);},1000);const handleFileClick=()=>{var _fileInputRef$current;(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();};const handleFileSelect=e=>{const file=e.target.files[0];if(!file)return;// Handle file upload (placeholder for now)\nconsole.log('File selected:',file);// You would implement file upload logic here\n// For now, we'll just show the filename as a message\nsetMessage(`üìé ${file.name}`);setMessageType('file');};return/*#__PURE__*/_jsxs(\"div\",{className:\"message-input-container\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"message-input-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"action-button\",onClick:handleFileClick,disabled:disabled,title:\"Attach file\",children:\"\\uD83D\\uDCCE\"}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",style:{display:'none'},onChange:handleFileSelect,accept:\"image/*,.pdf,.doc,.docx,.txt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textareaRef,value:message,onChange:handleInputChange,onKeyPress:handleKeyPress,placeholder:disabled?'Select a chat to start messaging...':'Type a message...',disabled:disabled,rows:\"1\",className:\"message-textarea\"}),/*#__PURE__*/_jsx(\"div\",{className:\"message-type-selector\",children:/*#__PURE__*/_jsxs(\"select\",{value:messageType,onChange:e=>setMessageType(e.target.value),disabled:disabled,className:\"type-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"text\",children:\"\\uD83D\\uDCAC Text\"}),/*#__PURE__*/_jsx(\"option\",{value:\"image\",children:\"\\uD83D\\uDCF7 Image\"}),/*#__PURE__*/_jsx(\"option\",{value:\"document\",children:\"\\uD83D\\uDCC4 Document\"}),/*#__PURE__*/_jsx(\"option\",{value:\"file\",children:\"\\uD83D\\uDCCE File\"})]})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"send-button\",disabled:disabled||!message.trim(),children:/*#__PURE__*/_jsx(\"span\",{className:\"send-icon\",children:disabled?'‚è≥':'‚û§'})})]}),isTyping&&/*#__PURE__*/_jsx(\"div\",{className:\"typing-indicator\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Typing...\"})})]});};export default MessageInput;","map":{"version":3,"names":["React","useState","useRef","debounce","jsx","_jsx","jsxs","_jsxs","MessageInput","_ref","onSendMessage","disabled","message","setMessage","messageType","setMessageType","isTyping","setIsTyping","fileInputRef","textareaRef","handleSubmit","e","preventDefault","trim","messageToSend","typeToSend","current","style","height","handleKeyPress","key","shiftKey","handleInputChange","target","value","textarea","Math","min","scrollHeight","debouncedStopTyping","handleFileClick","_fileInputRef$current","click","handleFileSelect","file","files","console","log","name","className","children","onSubmit","type","onClick","title","ref","display","onChange","accept","onKeyPress","placeholder","rows"],"sources":["/Users/ridhoauliarahman/Library/CloudStorage/GoogleDrive-ridho.aulia7324@gmail.com/My Drive/ICP/icp-chat-app/src/frontend/src/components/Chat/MessageInput.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { debounce } from '../../utils/helpers';\n\nconst MessageInput = ({ onSendMessage, disabled }) => {\n  const [message, setMessage] = useState('');\n  const [messageType, setMessageType] = useState('text');\n  const [isTyping, setIsTyping] = useState(false);\n  const fileInputRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!message.trim() || disabled) return;\n\n    const messageToSend = message.trim();\n    const typeToSend = { [messageType]: null };\n    \n    setMessage('');\n    setIsTyping(false);\n    \n    // Reset textarea height\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n    }\n\n    await onSendMessage(messageToSend, typeToSend);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setMessage(e.target.value);\n    \n    // Auto-resize textarea\n    const textarea = e.target;\n    textarea.style.height = 'auto';\n    textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\n    \n    // Typing indicator (debounced)\n    if (!isTyping) {\n      setIsTyping(true);\n    }\n    \n    debouncedStopTyping();\n  };\n\n  const debouncedStopTyping = debounce(() => {\n    setIsTyping(false);\n  }, 1000);\n\n  const handleFileClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileSelect = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Handle file upload (placeholder for now)\n    console.log('File selected:', file);\n    \n    // You would implement file upload logic here\n    // For now, we'll just show the filename as a message\n    setMessage(`üìé ${file.name}`);\n    setMessageType('file');\n  };\n\n  return (\n    <div className=\"message-input-container\">\n      <form onSubmit={handleSubmit} className=\"message-input-form\">\n        <div className=\"input-actions\">\n          <button\n            type=\"button\"\n            className=\"action-button\"\n            onClick={handleFileClick}\n            disabled={disabled}\n            title=\"Attach file\"\n          >\n            üìé\n          </button>\n          \n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            style={{ display: 'none' }}\n            onChange={handleFileSelect}\n            accept=\"image/*,.pdf,.doc,.docx,.txt\"\n          />\n        </div>\n\n        <div className=\"input-wrapper\">\n          <textarea\n            ref={textareaRef}\n            value={message}\n            onChange={handleInputChange}\n            onKeyPress={handleKeyPress}\n            placeholder={disabled ? 'Select a chat to start messaging...' : 'Type a message...'}\n            disabled={disabled}\n            rows=\"1\"\n            className=\"message-textarea\"\n          />\n          \n          <div className=\"message-type-selector\">\n            <select\n              value={messageType}\n              onChange={(e) => setMessageType(e.target.value)}\n              disabled={disabled}\n              className=\"type-select\"\n            >\n              <option value=\"text\">üí¨ Text</option>\n              <option value=\"image\">üì∑ Image</option>\n              <option value=\"document\">üìÑ Document</option>\n              <option value=\"file\">üìé File</option>\n            </select>\n          </div>\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"send-button\"\n          disabled={disabled || !message.trim()}\n        >\n          <span className=\"send-icon\">\n            {disabled ? '‚è≥' : '‚û§'}\n          </span>\n        </button>\n      </form>\n      \n      {isTyping && (\n        <div className=\"typing-indicator\">\n          <span>Typing...</span>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MessageInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}